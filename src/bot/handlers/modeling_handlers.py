from aiogram import F, Router
from aiogram.filters import Command
from aiogram.types import CallbackQuery, LabeledPrice, Message

from bot.keyboards import ModelMenuBtns, ModelMenuOption, get_model_kb, get_payment_kb
from config import Settings

router = Router()


@router.message(Command("model"))
async def model_message(message: Message):
    welcome_message = (
        "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π! üé≠\n\n"
        "–ú–µ–Ω—è –∑–æ–≤—É—Ç –í–∞–ª–µ—Ä–∏–π –°—Ç–∞–π—Å—É–ø–æ–≤, —è –ø–ª–∞—Å—Ç–∏—á–µ—Å–∫–∏–π —Ö–∏—Ä—É—Ä–≥ —Å 20-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º –≤ —Ä–∏–Ω–æ–ø–ª–∞—Å—Ç–∏–∫–µ. "
        "–ü–æ–Ω–∏–º–∞—é, –∫–∞–∫ —Å–ª–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±—è —Å –Ω–æ–≤—ã–º –Ω–æ—Å–æ–º, –ø–æ—ç—Ç–æ–º—É —è —Å–æ–∑–¥–∞–ª —ç—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å.\n\n"
        "<b>–ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:</b>\n"
        "‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –ª–∏—Ü–∞ —Å –Ω–æ–≤–æ–π —Ñ–æ—Ä–º–æ–π –Ω–æ—Å–∞\n"
        "‚Ä¢ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —Å–æ–∑–¥–∞–Ω–Ω–æ–µ —Å —É—á–µ—Ç–æ–º –∞–Ω–∞—Ç–æ–º–∏—á–µ—Å–∫–∏—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π\n"
        "‚Ä¢ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –æ—Ü–µ–Ω–∫—É –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –∏–º–µ–Ω–Ω–æ –≤–∞—à–µ–≥–æ –Ω–æ—Å–∞\n"
        "‚Ä¢ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è —Å —Ä–µ—à–µ–Ω–∏–µ–º –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç "
        "—Ç–æ–≥–æ, –≥–¥–µ –≤—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –¥–µ–ª–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é\n\n"
        "<b>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:</b>\n"
        "–í—ã –∑–∞–≥—Ä—É–∂–∞–µ—Ç–µ —Ñ–æ—Ç–æ –≤ –ø—Ä–æ—Ñ–∏–ª—å, —è –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω–æ—Å–∞ –∏ —Å–æ–∑–¥–∞—é –æ–¥–∏–Ω –∏–ª–∏ –¥–≤–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ "
        "—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞ –≤–æ–∑–º–æ–∂–Ω–æ–π –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏. –≠—Ç–æ –Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ - –∫–∞–∂–¥–æ–µ "
        "–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –∑–Ω–∞–Ω–∏–π –ø–ª–∞—Å—Ç–∏—á–µ—Å–∫–æ–π —Ö–∏—Ä—É—Ä–≥–∏–∏.\n\n"
        "<b>–í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å:</b>\n"
        "–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ - —ç—Ç–æ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–≤–∏–¥–µ—Ç—å, "
        "–∫–∞–∫ –Ω–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –Ω–æ—Å–∞ –±—É–¥–µ—Ç –≥–∞—Ä–º–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Å –≤–∞—à–∏–º –ª–∏—Ü–æ–º. "
        "–û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–π –ø–ª–∞–Ω –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ –æ–±—Å—É–∂–¥–∞–µ—Ç—Å—è –Ω–∞ –æ—á–Ω–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏.\n\n"
        "–ì–æ—Ç–æ–≤—ã —É–≤–∏–¥–µ—Ç—å —Å–≤–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∂–µ–Ω–∏–µ?"
    )
    await message.answer(welcome_message, reply_markup=get_model_kb())


@router.callback_query(ModelMenuOption.filter())
async def model_menu_handler(callback: CallbackQuery, callback_data: ModelMenuOption):
    await callback.answer()
    match callback_data.action:
        case ModelMenuBtns.UPLOAD_PHOTO:
            ...
        case ModelMenuBtns.PHOTO_REQUIREMENTS:
            ...
        case ModelMenuBtns.DETAILS:
            modeling_message = (
                "<b>–°—Ç–æ–∏–º–æ—Å—Ç—å –∏ —Å—Ä–æ–∫–∏</b>\n\n"
                "üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: 3000 —Ä—É–±–ª–µ–π\n\n"
                "‚è±Ô∏è –°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 24 —á–∞—Å–∞\n\n"
                "–ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ –≤—Ä–∞—á–æ–º-—Ö–∏—Ä—É—Ä–≥–æ–º, –∞ –Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. "
                "–î–æ–∫—Ç–æ—Ä –ª–∏—á–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–∂–¥—É—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é, –∏–∑—É—á–∞–µ—Ç "
                "–∞–Ω–∞—Ç–æ–º–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ –ª–∏—Ü–∞ –∏ —Å–æ–∑–¥–∞–µ—Ç —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å "
                "—É—á–µ—Ç–æ–º –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –ø–ª–∞—Å—Ç–∏—á–µ—Å–∫–æ–π —Ö–∏—Ä—É—Ä–≥–∏–∏.\n\n"
                "–ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—Ä–µ–º—è - –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –º–æ–≥—É—Ç "
                "–±—ã—Ç—å –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–º–∏.\n\n"
                "<b>–í—ã –ø–æ–ª—É—á–∏—Ç–µ:</b>\n"
                "‚Ä¢ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –æ—Ç —Ö–∏—Ä—É—Ä–≥–∞ —Å 20-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º\n"
                "‚Ä¢ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ —Å —É—á–µ—Ç–æ–º –≤–∞—à–∏—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –∏ –ø–æ–∂–µ–ª–∞–Ω–∏–π "
                "(–∏–Ω–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω—ã 2 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Å –Ω–µ–±–æ–ª—å—à–∏–º–∏ –æ—Ç–ª–∏—á–∏—è–º–∏)\n"
                "‚Ä¢ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –≤–∞—à–∏–º –∞–Ω–∞—Ç–æ–º–∏—á–µ—Å–∫–∏–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º\n\n"
                "<b>–ì–æ—Ç–æ–≤—ã –∑–∞–∫–∞–∑–∞—Ç—å –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ?</b> üì∏"
            )
            await callback.message.answer(modeling_message, reply_markup=get_payment_kb())


@router.callback_query(F.data == "model_payment")
async def model_payment_handler(callback: CallbackQuery, settings: Settings):
    await callback.answer()
    description = "–°—Ç–æ–∏–º–æ—Å—Ç—å: 3000 —Ä—É–±–ª–µ–π."
    amount = 3000 * 100
    prices = [LabeledPrice(label="–û–ø–ª–∞—Ç–∏—Ç—å", amount=amount)]
    await callback.bot.send_invoice(
        chat_id=callback.from_user.id,
        title="–£—Å–ª—É–≥–∞ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è.",
        description=description,
        payload="model",
        provider_token=settings.PAYMENT_PROVIDER_TOKEN.get_secret_value(),
        currency="RUB",
        prices=prices,
    )
